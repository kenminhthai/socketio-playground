{"map":"{\"version\":3,\"sources\":[\"/Users/Kenmintae/Desktop/works/sample2/src/app.js\",\"/Users/Kenmintae/Desktop/works/sample2/src/socketBuilder.js\"],\"names\":[\"__webpack_require__\",\"App\",\"elem\",\"_classCallCheck3\",\"default\",\"this\",\"socket\",\"io\",\"connect\",\"loadModule\",\"bind\",\"components\",\"item\",\"_this\",\"on\",\"console\",\"log\",\"data\",\"innerHTML\",\"_module2\",\"Socket\",\"server\",\"config\",\"rooms\",\"connected\",\"Array\",\"isArray\",\"clients\",\"_iteratorNormalCompletion\",\"_didIteratorError\",\"_iteratorError\",\"undefined\",\"_step\",\"_iterator\",\"Symbol\",\"iterator\",\"next\",\"done\",\"roomId\",\"value\",\"room\",\"sockets\",\"adapter\",\"i\",\"err\",\"return\",\"_\",\"values\",\"event\",\"args\",\"emit\",\"namespace\",\"of\",\"to\",\"listener\"],\"mappings\":\"iRAAAA,EAAA,OACAA,EAAA,QACAA,EAAA,4DAEqBC,aACnB,SAAAA,EAAYC,IAAM,EAAAC,EAAAC,SAAAC,KAAAJ,GACXC,IACLG,KAAKH,KAAOA,EACZG,KAAKC,OAASC,GAAGC,QAAQ,yBACzBH,KAAKI,WAAaJ,KAAKI,WAAWC,KAAKL,MACvCA,KAAKM,WAAa,8DAGTC,GACT,OAAOA,mCAGA,IAAAC,EAAAR,KACPA,KAAKC,OAAOQ,GAAG,UAAW,WACxBC,QAAQC,IAAI,+CAEdX,KAAKC,OAAOQ,GAAG,OAAQ,SAAAG,GAAA,OAAQJ,EAAKJ,WAAWQ,KAC3CZ,KAAKH,OACPG,KAAKH,KAAKgB,UAAV,6FAGM,EAAAC,EAAAf,WAHN,qDAnBeH,qKCJAmB,aACnB,SAAAA,EAAYC,EAAQC,IAAQ,EAAAnB,EAAAC,SAAAC,KAAAe,GAE1Bf,KAAKE,GAAKA,GAAGc,EAAQC,EAAA,0EAWHC,GAClB,IAAKlB,KAAKmB,UAAW,MAAO,GAC5B,GAAID,EAAO,CACJE,MAAMC,QAAQH,KACjBA,EAAQ,CAACA,IAEX,IAAII,EAAU,GAJLC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAMT,IAAA,IAAAC,EAAAC,EAAmBV,EAAnBW,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAA0B,CAAA,IAAjBU,EAAiBN,EAAAO,MACpBC,EAAOnC,KAAKE,GAAGkC,QAAQC,QAAQnB,MAAMe,GAEzC,GAAKE,GAASA,EAAKC,QAInB,IAAK,IAAIE,KAAKH,EAAKC,QACbpC,KAAKmB,UAAUmB,KACjBhB,EAAQgB,GAAKtC,KAAKmB,UAAUmB,KAfzB,MAAAC,GAAAf,GAAA,EAAAC,EAAAc,EAAA,QAAA,KAAAhB,GAAAK,EAAAY,QAAAZ,EAAAY,SAAA,QAAA,GAAAhB,EAAA,MAAAC,GAmBT,OAAOgB,EAAEC,OAAOpB,GAElB,OAAOmB,EAAEC,OAAO1C,KAAKmB,wCAGlBwB,EAAOC,GACV,OAAO5C,KAAKE,GAAG2C,KAAKF,EAAOC,8BAG1BE,GACD,OAAO9C,KAAKE,GAAG6C,GAAGD,8BAGjBX,GACD,OAAOnC,KAAKE,GAAG8C,GAAGb,8BAGjBQ,EAAOM,GAER,OADAjD,KAAKE,GAAGO,GAAGkC,EAAOM,GACXjD,qCA/CP,OAAOA,KAAKE,GAAGkC,0CAIf,OAAOpC,KAAKoC,QAAQjB,6BAXHJ\",\"sourcesContent\":[\"import * as css from \\\"./index.css\\\";\\nimport renderButtons from \\\"./module1\\\";\\nimport Socket from \\\"./socketBuilder\\\";\\n\\nexport default class App {\\n  constructor(elem) {\\n    if (!elem) return;\\n    this.elem = elem;\\n    this.socket = io.connect(\\\"http://localhost:3001\\\");\\n    this.loadModule = this.loadModule.bind(this);\\n    this.components = null;\\n  }\\n\\n  loadModule(item) {\\n    return item;\\n  }\\n\\n  render() {\\n    this.socket.on(\\\"connect\\\", () => {\\n      console.log(\\\"Just connected to main server from client\\\");\\n    });\\n    this.socket.on(\\\"sync\\\", data => this.loadModule(data));\\n    if (this.elem)\\n      this.elem.innerHTML = `\\n        <section data-component=\\\"app\\\">\\n          <h1>Portal Component</h1>\\n          ${renderButtons()}\\n        </section>\\n        `;\\n  }\\n}\\n\\n// export default class App {\\n//   constructor(elem) {\\n//     if (!elem) return;\\n//     this.elem = elem;\\n//   }\\n\\n//   render() {\\n//     const socket = io.connect(\\\"http://localhost:3001\\\");\\n//     socket.on(\\\"connect\\\", () => {\\n//       console.log(\\\"Just connected to main server from client\\\");\\n//     });\\n\\n//     socket.on(\\\"sync\\\", data => {\\n//       console.log(data);\\n//     });\\n\\n//     if (this.elem)\\n//       this.elem.innerHTML = `\\n//         <section data-component=\\\"app\\\">\\n//           <h1>Portal Component</h1>\\n//         </section>\\n//         `;\\n//   }\\n// }\\n\",\"export default class Socket {\\n  constructor(server, config) {\\n    //server: http.server, config:KeyValuePair<any>\\n    this.io = io(server, config[\\\"options\\\"]);\\n  }\\n\\n  get sockets() {\\n    return this.io.sockets;\\n  }\\n\\n  get connected() {\\n    return this.sockets.connected;\\n  }\\n\\n  getConnectedClients(rooms) {\\n    if (!this.connected) return [];\\n    if (rooms) {\\n      if (!Array.isArray(rooms)) {\\n        rooms = [rooms];\\n      }\\n      let clients = {};\\n\\n      for (let roomId of rooms) {\\n        let room = this.io.sockets.adapter.rooms[roomId];\\n\\n        if (!room || !room.sockets) {\\n          continue;\\n        }\\n\\n        for (let i in room.sockets) {\\n          if (this.connected[i]) {\\n            clients[i] = this.connected[i];\\n          }\\n        }\\n      }\\n      return _.values(clients);\\n    }\\n    return _.values(this.connected);\\n  }\\n\\n  emit(event, args) {\\n    return this.io.emit(event, args);\\n  }\\n\\n  of(namespace) {\\n    return this.io.of(namespace);\\n  }\\n\\n  to(room) {\\n    return this.io.to(room);\\n  }\\n\\n  on(event, listener) {\\n    this.io.on(event, listener);\\n    return this;\\n  }\\n}\\n\\n// connect() {\\n//   var self = this;\\n//   if (self.socket) {\\n//     self.socket.destroy();\\n//     delete self.socket;\\n//     self.socket = null;\\n//   }\\n//   this.socket = io.connect(\\n//     \\\"http://127.0.0.1:3000\\\",\\n//     {\\n//       reconnection: true,\\n//       reconnectionDelay: 1000,\\n//       reconnectionDelayMax: 5000,\\n//       reconnectionAttempts: Infinity\\n//     }\\n//   );\\n//   this.socket.on(\\\"connect\\\", function() {\\n//     console.log(\\\"connected to server\\\");\\n//   });\\n//   this.socket.on(\\\"disconnect\\\", function() {\\n//     console.log(\\\"disconnected from server\\\");\\n//     window.setTimeout(\\\"app.connect()\\\", 5000);\\n//   });\\n// }\\n\"]}","code":"webpackHotUpdate(0,{23:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=u(n(24)),i=u(n(25)),r=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(39)),u(n(43)));u(n(44));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,o.default)(this,t),e&&(this.elem=e,this.socket=io.connect(\"http://localhost:3001\"),this.loadModule=this.loadModule.bind(this),this.components=null)}return(0,i.default)(t,[{key:\"loadModule\",value:function(t){return t}},{key:\"render\",value:function(){var t=this;this.socket.on(\"connect\",function(){console.log(\"Just connected to main server from client\")}),this.socket.on(\"sync\",function(e){return t.loadModule(e)}),this.elem&&(this.elem.innerHTML='\\n        <section data-component=\"app\">\\n          <h1>Portal Component</h1>\\n          '+(0,r.default)()+\"\\n        </section>\\n        \")}}]),t}();e.default=c},44:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(n(24)),i=r(n(25));function r(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){(0,o.default)(this,t),this.io=io(e,n.options)}return(0,i.default)(t,[{key:\"getConnectedClients\",value:function(t){if(!this.connected)return[];if(t){Array.isArray(t)||(t=[t]);var e={},n=!0,o=!1,i=void 0;try{for(var r,u=t[Symbol.iterator]();!(n=(r=u.next()).done);n=!0){var c=r.value,s=this.io.sockets.adapter.rooms[c];if(s&&s.sockets)for(var l in s.sockets)this.connected[l]&&(e[l]=this.connected[l])}}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return _.values(e)}return _.values(this.connected)}},{key:\"emit\",value:function(t,e){return this.io.emit(t,e)}},{key:\"of\",value:function(t){return this.io.of(t)}},{key:\"to\",value:function(t){return this.io.to(t)}},{key:\"on\",value:function(t,e){return this.io.on(t,e),this}},{key:\"sockets\",get:function(){return this.io.sockets}},{key:\"connected\",get:function(){return this.sockets.connected}}]),t}();e.default=u}});","extractedComments":[]}